<!DOCTYPE html><html><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com https://cdn.socket.io; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;"><meta http-equiv="x-dns-prefetch-control" content="off"><meta name="x-poe-datastore-behavior" content="disabled"><meta name="x-poe-allow-downloads" content="true"><script src="https://puc.poecdn.net/standard.25f6d5ebb7608dc2f276.js"></script>
    <meta charset="utf-8">
    <title>Minecraft AI</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script><script src="https://puc.poecdn.net/disableWebRTC.9710cebe07429a9e8e06.js"></script><script src="https://puc.poecdn.net/tw.b9024aecac666455e183.js"></script><script src="https://puc.poecdn.net/deps.faccd16000d314dc16d5.js"></script><script src="https://puc.poecdn.net/exports.b0f0f482cdeb5302b0b9.js"></script><script src="https://puc.poecdn.net/renderer.75c73ae6b4235f62945a.js"></script><script>Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var _react = require('react'); var _react2 = _interopRequireDefault(_react);


var _lucidereact = require('lucide-react');

const MinecraftAIManager = () => {
  // Tab management
  const [activeTab, setActiveTab] = _react.useState.call(void 0, 'monitor');

  // Add these new state variables
  const [socketConnected, setSocketConnected] = _react.useState.call(void 0, false);
  const [sttKeys, setSttKeys] = _react.useState.call(void 0, {});
  const [sttPorts, setSttPorts] = _react.useState.call(void 0, {});

  // Add socket ref
  const socketRef = _react.useRef.call(void 0, null);

  // API Connection State
  const [apiConnected, setApiConnected] = _react.useState.call(void 0, false);
  const [lastApiCheck, setLastApiCheck] = _react.useState.call(void 0, null);
  const [apiLatency, setApiLatency] = _react.useState.call(void 0, null);
  const [isInitializing, setIsInitializing] = _react.useState.call(void 0, true);
  
  // Global Monitor State
  const [monitorQuery, setMonitorQuery] = _react.useState.call(void 0, '');
  const [monitorChat, setMonitorChat] = _react.useState.call(void 0, []);
  const [actionLog, setActionLog] = _react.useState.call(void 0, []);
  const [isProcessingMonitor, setIsProcessingMonitor] = _react.useState.call(void 0, false);
  
  // Agent Management State
  const [agents, setAgents] = _react.useState.call(void 0, []);
  const [selectedAgent, setSelectedAgent] = _react.useState.call(void 0, null);
  const [agentCommand, setAgentCommand] = _react.useState.call(void 0, '');
  const [agentMessages, setAgentMessages] = _react.useState.call(void 0, []);
  const [agentStatusLogs, setAgentStatusLogs] = _react.useState.call(void 0, []);
  const [isProcessingAgent, setIsProcessingAgent] = _react.useState.call(void 0, false);
  const [isRefreshingStatus, setIsRefreshingStatus] = _react.useState.call(void 0, false);
  
  // Voice and General State
  const [isListening, setIsListening] = _react.useState.call(void 0, false);
  const [voiceStatus, setVoiceStatus] = _react.useState.call(void 0, 'Voice detection stopped');
  const [transcriptHistory, setTranscriptHistory] = _react.useState.call(void 0, []);
  const [apiSelection, setApiSelection] = _react.useState.call(void 0, '1');
  const [globalStats, setGlobalStats] = _react.useState.call(void 0, {
    totalAgents: '-',
    activeAgents: '-',
    serverStatus: 'Initializing...',
    uptime: '-',
    memoryUsage: '-',
    tasksCompleted: '-'
  });

  // Add this ref near your other state/refs
  const messagesEndRef = _react.useRef.call(void 0, null);
  
  // Refs for audio handling
  const mediaRecorderRef = _react.useRef.call(void 0, null);
  const audioStreamRef = _react.useRef.call(void 0, null);

  // API Configuration
  const MONITOR_SERVER_URL = 'http://localhost:8080'; // Backend API URL
  const API_BASE_URL = `${MONITOR_SERVER_URL}/api`; // Backend API URL
  
  // API Request Functions
  const apiRequest = async (endpoint, options = {}) => {
    const startTime = Date.now();
    try {
      const url = `${API_BASE_URL}${endpoint}`;
      console.log("API Request with url:", url);
      const response = await fetch(url, {
        headers: {
          'Content-Type': 'application/json',
          ...options.headers
        },
        ...options
      });
      
      const latency = Date.now() - startTime;
      setApiLatency(latency);
      setApiConnected(response.ok);
      setLastApiCheck(new Date().toLocaleTimeString());
      
      if (!response.ok) {
        throw new Error(`API Error: ${response.status} ${response.statusText}`);
      }
      
      return await response.json();
    } catch (error) {
      console.error('API Request failed:', error);
      setApiConnected(false);
      setLastApiCheck(new Date().toLocaleTimeString());
      throw error;
    }
  };

  // Agent Management API Functions
  
  const getAgentStatus = async (agentName) => {
    try {
      const response = await apiRequest(`/agents/${agentName}/status`, {
        method: 'GET',
      });
      return response.success ? response.data : null;
    } catch (error) {
      console.error(`Failed to get status of agent ${agentName}:`, error);
      throw error;
    }
  };

  const sendAgentCommand = async (agentName, command) => {
    try {
      const response = await apiRequest(`/agents/${agentName}/command`, {
        method: 'POST',
        body: JSON.stringify({ command })
      });
      return response.success ? response.data : null;
    } catch (error) {
      console.error(`Failed to send command to agent ${agentName}:`, error);
      throw error;
    }
  };

  const getServerInfo = async () => {
    try {
      const response = await apiRequest('/minecraft/server');
      return response.success ? response.data : null;
    } catch (error) {
      console.error('Failed to fetch server info:', error);
      return null;
    }
  };

  // Real-time Updates

  const refreshAllData = async () => {
    setIsRefreshingStatus(true);
    
    // Request data via WebSocket instead of REST API
    if (socketRef.current && socketConnected) {
        socketRef.current.emit('request-system-status');
        socketRef.current.emit('request-agents-data');
        socketRef.current.emit('request-action-logs', 50);
        socketRef.current.emit('request-agent-status-logs', 50);
        
        if (selectedAgent) {
            socketRef.current.emit('request-agent-messages', selectedAgent.id);
        }
    }
    
    setIsRefreshingStatus(false);
  };

  _react.useEffect.call(void 0, () => {
    if (messagesEndRef.current) {
      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });
    }
  }, [agentMessages]);

  // Initialize data
  _react.useEffect.call(void 0, () => {
    const initializeData = async () => {
      setIsInitializing(true);
      
      try {
        // First attempt to load real data from API
        await refreshAllData();
        
        // Initialize monitor chat based on API connection status
        if (apiConnected) {
          setGlobalStats({
            totalAgents: '-',
            activeAgents: '-',
            serverStatus: 'Connected',
            uptime: '-',
            memoryUsage: '-',
            tasksCompleted: '-'
          });
          setMonitorChat([
            { 
              id: 1, 
              type: 'bot', 
              message: 'System initialized successfully. All agents are ready for monitoring and management.', 
              timestamp: new Date().toLocaleTimeString(),
              actions: []
            }
          ]);
        } else {
          // Set fallback state when API is not available
          setGlobalStats({
            totalAgents: '-',
            activeAgents: '-',
            serverStatus: 'Disconnected',
            uptime: '-',
            memoryUsage: '-',
            tasksCompleted: '-'
          });

          setMonitorChat([
            { 
              id: 1, 
              type: 'bot', 
              message: 'Backend API is not available. Please check the connection to the Minecraft server. The system is running in offline mode with limited functionality.', 
              timestamp: new Date().toLocaleTimeString(),
              actions: []
            }
          ]);

          // Set empty agents array - no fallback agents
          setAgents([]);
          
          // Set empty logs
          setActionLog([]);
          setAgentStatusLogs([]);
        }
      } catch (error) {
        console.error('Initialization failed:', error);
        setAgents([]);
      } finally {
        setIsInitializing(false);
      }
    };

    initializeData();

    // Set up periodic refresh only if not initializing
    const interval = setInterval(() => {
      if (!isInitializing) {
        refreshAllData();
      }
    }, 30000); // Refresh every 30 seconds

    return () => clearInterval(interval);
  }, []);

  // Update selected agent data when selection changes
  _react.useEffect.call(void 0, () => {
    if (selectedAgent && apiConnected) {
      const fetchAgentData = async () => {
        try {
          const messages = await getAgentMessages(selectedAgent.name);
          setAgentMessages(messages);
        } catch (error) {
          console.error('Failed to fetch agent data:', error);
        }
      };
      fetchAgentData();
    } else if (!apiConnected) {
      // Clear agent messages when API is disconnected
      setAgentMessages([]);
    }
  }, [selectedAgent, apiConnected]);

  // WebSocket connection and event handlers
  _react.useEffect.call(void 0, () => {
    // Initialize socket connection
    socketRef.current = io(MONITOR_SERVER_URL);
    
    // Connection events
    socketRef.current.on('connect', () => {
      console.log('WebSocket connected');
      setSocketConnected(true);
    });
    
    socketRef.current.on('disconnect', () => {
      console.log('WebSocket disconnected');
      setSocketConnected(false);
    });
    
    // Agent updates from WebSocket
    socketRef.current.on('agents-update', (agentsData) => {
      console.log('WebSocket agents update:', agentsData);
      setAgents(agentsData);
    });
    
    // Keys update
    socketRef.current.on('keys-update', (keys) => {
      console.log('Keys update:', keys);
      setSttKeys(keys);
    });
    
    socketRef.current.on('system-status', (statusData) => {
        console.log('Received system status:', statusData);
        setGlobalStats({
            totalAgents: statusData.totalAgents || '-',
            activeAgents: statusData.activeAgents || '-',
            serverStatus: statusData.serverStatus || 'Unknown',
            uptime: statusData.uptime || '-',
            memoryUsage: statusData.memoryUsage || '-',
            tasksCompleted: statusData.tasksCompleted || '-'
        });
    });

    socketRef.current.on('action-logs', (logs) => {
        setActionLog(logs);
    });

    socketRef.current.on('agent-status-logs', (logs) => {
        setAgentStatusLogs(logs);
    });

    socketRef.current.on('new-agent-status-log', (logEntry) => {
        setAgentStatusLogs(prev => [logEntry, ...prev.slice(0, 49)]);
    });
    
    // Cleanup on unmount
    return () => {
      if (socketRef.current) {
        socketRef.current.disconnect();
      }
    };
  }, []);

  // Clear selected agent if it no longer exists in the agents list
  _react.useEffect.call(void 0, () => {
    if (selectedAgent && agents.length > 0) {
      const agentExists = agents.find(agent => agent.id === selectedAgent.id);
      if (!agentExists) {
        setSelectedAgent(null);
      }
    }
  }, [agents, selectedAgent]);

  // Voice recording functions
  const toggleVoiceRecording = async () => {
    if (!isListening) {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        audioStreamRef.current = stream;
        setIsListening(true);
        setVoiceStatus('Listening for voice...');
        startVoiceDetection(stream);
      } catch (error) {
        setVoiceStatus('Failed to access microphone');
      }
    } else {
      stopVoiceListening();
    }
  };

  const startVoiceDetection = (stream) => {
    const mediaRecorder = new MediaRecorder(stream);
    mediaRecorderRef.current = mediaRecorder;
    
    mediaRecorder.ondataavailable = (event) => {
      if (event.data.size > 0) {
        processVoiceData(event.data);
      }
    };
    
    mediaRecorder.start(1000);
    setVoiceStatus('Recording...');
  };

  const stopVoiceListening = () => {
    if (audioStreamRef.current) {
      audioStreamRef.current.getTracks().forEach(track => track.stop());
    }
    if (mediaRecorderRef.current) {
      mediaRecorderRef.current.stop();
    }
    setIsListening(false);
    setVoiceStatus('Voice detection stopped');
  };

  const updateAndSetSelectedAgent = async (agent) => {
    const update = await getAgentStatus(agent.name);
    const agentUpdate = { ...agent, ...update };
    console.log("Agent Update:", agentUpdate);
    if (agentUpdate) {
      setAgents(prevAgents => 
        prevAgents.map(a => 
          a.name === agent.name ? agentUpdate : a
        )
      );
      setSelectedAgent(agentUpdate);
    } else {
      setSelectedAgent(agent);
    }
  };

  const processVoiceData = (audioData) => {
    setTimeout(() => {
      const transcript = "Show me agent status";
      addToTranscriptHistory(transcript);
      if (activeTab === 'monitor') {
        setMonitorQuery(transcript);
      } else {
        setAgentCommand(transcript);
      }
    }, 2000);
  };

  const addToTranscriptHistory = (text) => {
    const newEntry = {
      id: Date.now(),
      text,
      timestamp: new Date().toLocaleTimeString()
    };
    setTranscriptHistory(prev => [newEntry, ...prev.slice(0, 49)]);
  };

  // Monitor chat functions with Pollinations AI
  const sendMonitorQuery = async () => {
    if (!monitorQuery.trim()) return;
    
    setIsProcessingMonitor(true);
    
    // Add user message
    const userMessage = {
      id: Date.now(),
      type: 'user',
      message: monitorQuery,
      timestamp: new Date().toLocaleTimeString()
    };
    setMonitorChat(prev => [...prev, userMessage]);
    
    try {
      // Create enhanced prompt for Pollinations AI
      const systemContext = `You are a Minecraft AI management assistant. 

Current system status: 
- ${globalStats.activeAgents}/${globalStats.totalAgents} agents active
- Server: ${globalStats.serverStatus} 
- Memory: ${globalStats.memoryUsage}
- Uptime: ${globalStats.uptime}
- API Status: ${apiConnected ? 'Connected' : 'Disconnected'}
- Socket Status: ${socketConnected ? 'Connected' : 'Disconnected'}

Available agents:
${agents.length > 0 ? agents.map(a => `- ${a.name}: ${a.status} at (${_optionalChain([a, 'access', _ => _.coordinates, 'optionalAccess', _2 => _2.x]) || '-'}, ${_optionalChain([a, 'access', _3 => _3.coordinates, 'optionalAccess', _4 => _4.y]) || '-'}, ${_optionalChain([a, 'access', _5 => _5.coordinates, 'optionalAccess', _6 => _6.z]) || '-'}) in ${a.biome || '-'}, Health: ${a.health || '-'}/${a.maxHealth || '-'}, Task: ${a.task || '-'}`).join('\n') : 'No agents available (API disconnected)'}

User query: ${monitorQuery}

Please respond helpfully about the Minecraft AI system. Be concise and actionable. If the API is disconnected or no agents are available, mention that functionality is limited.`;

      // Call Pollinations AI
      const response = await fetch(`https://text.pollinations.ai/${encodeURIComponent(systemContext)}`);
      const textResponse = await response.text();
      
      // Generate actions based on the query
      const actions = generateActionsFromQuery(monitorQuery);
      
      const botResponse = {
        id: Date.now() + 1,
        type: 'bot',
        message: textResponse,
        timestamp: new Date().toLocaleTimeString(),
        actions: actions
      };
      
      setMonitorChat(prev => [...prev, botResponse]);
      
      // Execute actions and add to log
      if (actions.length > 0) {
        executeActions(actions);
      }
    } catch (error) {
      console.error('Monitor query failed:', error);
      const errorResponse = {
        id: Date.now() + 1,
        type: 'bot',
        message: 'Sorry, I encountered an error processing your request. Please check your connection.',
        timestamp: new Date().toLocaleTimeString(),
        actions: []
      };
      setMonitorChat(prev => [...prev, errorResponse]);
    } finally {
      setIsProcessingMonitor(false);
      setMonitorQuery('');
    }
  };

  const generateActionsFromQuery = (query) => {
    const lowerQuery = query.toLowerCase();
    const actions = [];
    
    if (lowerQuery.includes('status') || lowerQuery.includes('check')) {
      actions.push({ name: 'get_agent_status', params: { all: true } });
    }
    if (lowerQuery.includes('start') || lowerQuery.includes('activate')) {
      actions.push({ name: 'start_agent', params: { agent_name: 'all' } });
    }
    if (lowerQuery.includes('stop') || lowerQuery.includes('halt')) {
      actions.push({ name: 'stop_agent', params: { agent_name: 'all' } });
    }
    if (lowerQuery.includes('report') || lowerQuery.includes('summary')) {
      actions.push({ name: 'generate_report', params: { type: 'summary' } });
    }
    if (lowerQuery.includes('mine') || lowerQuery.includes('mining')) {
      actions.push({ name: 'mine_resources', params: { resource_type: 'diamond', quantity: 10 } });
    }
    if (lowerQuery.includes('build') || lowerQuery.includes('construct')) {
      actions.push({ name: 'build_structure', params: { structure_type: 'house', location: 'base' } });
    }
    
    return actions;
  };

  const executeActions = (actions) => {
    actions.forEach((action, index) => {
      setTimeout(() => {
        const logEntry = {
          id: Date.now() + index,
          name: action.name,
          params: action.params,
          status: apiConnected ? (Math.random() > 0.2 ? 'completed' : 'failed') : 'failed',
          timestamp: new Date().toLocaleTimeString(),
          duration: `${(Math.random() * 3 + 0.5).toFixed(1)}s`,
          description: apiConnected ? generateActionDescription(action.name, action.params) : 'API Unavailable'
        };
        setActionLog(prev => [logEntry, ...prev.slice(0, 49)]);
      }, index * 500);
    });
  };

  const generateActionDescription = (name, params) => {
    const descriptions = {
      get_agent_status: 'Retrieved status for all agents',
      start_agent: `Started agent: ${params.agent_name || 'unknown'}`,
      stop_agent: `Stopped agent: ${params.agent_name || 'unknown'}`,
      generate_report: `Generated ${params.type || 'standard'} report`,
      mine_resources: `Mining ${params.resource_type || 'resources'}`,
      build_structure: `Building ${params.structure_type || 'structure'}`
    };
    return descriptions[name] || `Executed ${name}`;
  };

  const getAgentMessages = async (agentName) => {
    try {
      const response = await apiRequest(`/agents/${agentName}/messages`, {
        method: 'GET',
      });
      return response.success ? response.data : null;
    } catch (error) {
      console.error(`Failed to get messages of agent ${agentName}:`, error);
      throw error;
    }
  }

  const handleSendAgentCommand = async () => {
    if (!agentCommand.trim() || !selectedAgent) return;
    
    setIsProcessingAgent(true);
    
    try {
      if (apiConnected) {
        // Send command via API
        const res = await sendAgentCommand(selectedAgent.name, agentCommand);
        
        // Refresh agent messages
        const messages = await getAgentMessages(selectedAgent.name);
        setAgentMessages(messages);
      } else {
        // Fallback behavior when API is unavailable
        const commandMessage = {
          id: Date.now(),
          message: agentCommand,
          timestamp: new Date().toLocaleTimeString(),
          sender: 'user',
          status: 'failed - API unavailable'
        };
        setAgentMessages(prev => [commandMessage, ...prev]);
      }
    } catch (error) {
      console.error('Command sending failed:', error);
      const errorMessage = {
        id: Date.now(),
        message: agentCommand,
        timestamp: new Date().toLocaleTimeString(),
        sender: 'user',
        status: 'failed'
      };
      setAgentMessages(prev => [errorMessage, ...prev]);
    } finally {
      setIsProcessingAgent(false);
      setAgentCommand('');
    }
  };

  const getStatusIcon = (status) => {
    switch (status) {
      case 'completed':
        return _react2.default.createElement(_lucidereact.CheckCircle, { className: "w-4 h-4 text-green-400"  ,} );
      case 'failed':
        return _react2.default.createElement(_lucidereact.XCircle, { className: "w-4 h-4 text-red-400"  ,} );
      case 'running':
        return _react2.default.createElement(_lucidereact.Clock, { className: "w-4 h-4 text-yellow-400 animate-spin"   ,} );
      default:
        return _react2.default.createElement(_lucidereact.AlertCircle, { className: "w-4 h-4 text-gray-400"  ,} );
    }
  };

  const getMessageStatusColor = (status) => {
    if (status.includes('failed')) return 'text-red-400';
    switch (status) {
      case 'delivered':
        return 'text-blue-400';
      case 'executed':
        return 'text-green-400';
      default:
        return 'text-gray-400';
    }
  };

  const getLogTypeColor = (type) => {
    switch (type) {
      case 'success':
        return 'text-green-400 bg-green-900/20 border-green-600';
      case 'error':
        return 'text-red-400 bg-red-900/20 border-red-600';
      case 'warning':
        return 'text-yellow-400 bg-yellow-900/20 border-yellow-600';
      case 'info':
      default:
        return 'text-blue-400 bg-blue-900/20 border-blue-600';
    }
  };

  const getLogTypeIcon = (type) => {
    switch (type) {
      case 'success':
        return _react2.default.createElement(_lucidereact.CheckCircle, { className: "w-3 h-3" ,} );
      case 'error':
        return _react2.default.createElement(_lucidereact.XCircle, { className: "w-3 h-3" ,} );
      case 'warning':
        return _react2.default.createElement(_lucidereact.AlertCircle, { className: "w-3 h-3" ,} );
      case 'info':
      default:
        return _react2.default.createElement(_lucidereact.Activity, { className: "w-3 h-3" ,} );
    }
  };

  const getBiomeIcon = (biome) => {
    if (!biome || biome === '-') return _react2.default.createElement(_lucidereact.MapPin, { className: "w-3 h-3 text-gray-400"  ,} );
    switch (biome) {
      case 'forest':
        return _react2.default.createElement(_lucidereact.TreePine, { className: "w-3 h-3 text-green-400"  ,} );
      case 'plains':
        return _react2.default.createElement(_lucidereact.Home, { className: "w-3 h-3 text-yellow-400"  ,} );
      case 'underground':
        return _react2.default.createElement(_lucidereact.Mountain, { className: "w-3 h-3 text-gray-400"  ,} );
      default:
        return _react2.default.createElement(_lucidereact.MapPin, { className: "w-3 h-3 text-blue-400"  ,} );
    }
  };

  const getHealthColor = (health, maxHealth) => {
    if (health === '-' || maxHealth === '-' || !health || !maxHealth) return 'text-gray-400';
    const percentage = (health / maxHealth) * 100;
    if (percentage >= 80) return 'text-green-400';
    if (percentage >= 50) return 'text-yellow-400';
    if (percentage >= 25) return 'text-orange-400';
    return 'text-red-400';
  };

  // Render loading state during initialization
  if (isInitializing) {
    return (
      _react2.default.createElement('div', { className: "h-screen bg-gray-900 text-gray-100 flex items-center justify-center"     ,}
        , _react2.default.createElement('div', { className: "text-center",}
          , _react2.default.createElement('div', { className: "w-16 h-16 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"        ,})
          , _react2.default.createElement('div', { className: "text-xl font-semibold mb-2"  ,}, "Initializing System" )
          , _react2.default.createElement('div', { className: "text-gray-400",}, "Connecting to Minecraft AI Management Backend..."     )
        )
      )
    );
  }

  // WebSocket-based agent control functions
  const startAgent = (agentName) => {
    if (socketRef.current) {
      socketRef.current.emit('start-agent', agentName);
    }
  };

  const stopAgent = (agentName) => {
    if (socketRef.current) {
      socketRef.current.emit('stop-agent', agentName);
    }
  };

  const restartAgent = (agentName) => {
    if (socketRef.current) {
      socketRef.current.emit('restart-agent', agentName);
    }
  };

  const killAllAgents = () => {
    if (socketRef.current) {
      socketRef.current.emit('stop-all-agents');
    }
  };

  const shutdown = () => {
    if (socketRef.current) {
      socketRef.current.emit('shutdown');
    }
  };

  return (
    _react2.default.createElement('div', { className: "h-screen bg-gray-900 text-gray-100 flex flex-col overflow-hidden"     ,}
      , _react2.default.createElement('style', { jsx: true,}, `
        /* Custom scrollbar styles */
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
          height: 8px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
          background: #374151;
          border-radius: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #6B7280;
          border-radius: 4px;
          border: 1px solid #374151;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #9CA3AF;
        }
        
        .custom-scrollbar::-webkit-scrollbar-corner {
          background: #374151;
        }

        /* Firefox scrollbar */
        .custom-scrollbar {
          scrollbar-width: thin;
          scrollbar-color: #6B7280 #374151;
        }

        /* Custom input and select styles */
        .custom-input {
          background: #374151;
          border: 1px solid #4B5563;
          color: #F9FAFB;
          transition: all 0.2s ease;
        }
        
        .custom-input:focus {
          outline: none;
          border-color: #3B82F6;
          box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }
        
        .custom-input:disabled {
          background: #1F2937;
          border-color: #374151;
          color: #6B7280;
          cursor: not-allowed;
        }

        /* Custom button styles */
        .custom-button {
          transition: all 0.2s ease;
          font-weight: 500;
        }
        
        .custom-button:hover:not(:disabled) {
          transform: translateY(-1px);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .custom-button:active:not(:disabled) {
          transform: translateY(0);
        }
        
        .custom-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
          transform: none;
          box-shadow: none;
        }

        /* Animation for pulse effect */
        .pulse-animation {
          animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }

        /* Smooth transitions for all interactive elements */
        .smooth-transition {
          transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
      `)

      /* Header with status display including update time */
      , _react2.default.createElement('div', { className: "bg-gray-800 border-b border-gray-700 p-4 flex-shrink-0"    ,}
        , _react2.default.createElement('div', { className: "flex items-center justify-between mb-3"   ,}
          , _react2.default.createElement('h1', { className: "text-xl font-bold text-white flex items-center gap-2"     ,}
            , _react2.default.createElement(_lucidereact.Server, { className: "text-blue-400 w-5 h-5"  ,} ), "Minecraft AI Management System"

          )

          /* Status display with SVG icons and update time */
          , _react2.default.createElement('div', { className: `flex items-center gap-3 px-4 py-2 rounded-lg border ${
            socketConnected 
              ? 'text-green-400 bg-green-900/20 border-green-600' 
              : 'text-red-400 bg-red-900/20 border-red-600'
          }`,}
            , socketConnected ? _react2.default.createElement(_lucidereact.Wifi, { className: "w-4 h-4" ,} ) : _react2.default.createElement(_lucidereact.WifiOff, { className: "w-4 h-4" ,} )
            , _react2.default.createElement('span', { className: "font-medium",}
              , globalStats.serverStatus
            )

            /* Show additional info when connected and meaningful */
            , socketConnected && globalStats.uptime !== '-' && (
              _react2.default.createElement('span', { className: "text-sm opacity-75" ,}, "Update - "
                 , globalStats.uptime
              )
            )
          )
        )

        /* Tab Navigation */
        , _react2.default.createElement('div', { className: "flex gap-2 bg-gray-700 rounded-lg p-1"    ,}
          , _react2.default.createElement('button', {
            onClick: () => setActiveTab('monitor'),
            className: `flex items-center gap-2 px-4 py-2 rounded-md smooth-transition custom-button ${
              activeTab === 'monitor'
                ? 'bg-blue-600 text-white shadow-lg'
                : 'text-gray-400 hover:text-white hover:bg-gray-600'
            }`,}

            , _react2.default.createElement(_lucidereact.Monitor, { className: "w-4 h-4" ,} ), "Global Monitor"

          )
          , _react2.default.createElement('button', {
            onClick: () => setActiveTab('agents'),
            className: `flex items-center gap-2 px-4 py-2 rounded-md smooth-transition custom-button ${
              activeTab === 'agents'
                ? 'bg-blue-600 text-white shadow-lg'
                : 'text-gray-400 hover:text-white hover:bg-gray-600'
            }`,}

            , _react2.default.createElement(_lucidereact.Users, { className: "w-4 h-4" ,} ), "Agent Management"

          )
        )
      )

      /* Tab Content - Takes exact remaining height */
      , _react2.default.createElement('div', { className: "flex-1 p-4 overflow-hidden"  ,}
        , activeTab === 'monitor' ? (
          // Global Monitor Tab
          _react2.default.createElement('div', { className: "grid grid-cols-4 gap-4 h-full"   ,}
            /* Left Side - 3/4 width */
            , _react2.default.createElement('div', { className: "col-span-3 flex flex-col gap-4 h-full overflow-hidden"     ,}
              /* Status Panel */
              , _react2.default.createElement('div', { className: "bg-gray-800 rounded-lg p-4 flex-shrink-0 border border-gray-700"     ,}
                , _react2.default.createElement('h2', { className: "text-lg font-semibold mb-3 flex items-center gap-2"     ,}
                  , _react2.default.createElement(_lucidereact.Activity, { className: "text-green-400",} ), "System Status"

                )
                , _react2.default.createElement('div', { className: "grid grid-cols-4 gap-3"  ,}
                  , _react2.default.createElement('div', { className: "bg-gray-700 rounded-lg p-3 border border-gray-600 smooth-transition hover:border-gray-500"      ,}
                    , _react2.default.createElement('div', { className: "text-xl font-bold text-blue-400"  ,}, globalStats.totalAgents)
                    , _react2.default.createElement('div', { className: "text-xs text-gray-400" ,}, "Total Agents" )
                  )
                  , _react2.default.createElement('div', { className: "bg-gray-700 rounded-lg p-3 border border-gray-600 smooth-transition hover:border-gray-500"      ,}
                    , _react2.default.createElement('div', { className: "text-xl font-bold text-green-400"  ,}, globalStats.activeAgents)
                    , _react2.default.createElement('div', { className: "text-xs text-gray-400" ,}, "Active Agents" )
                  )
                  , _react2.default.createElement('div', { className: "bg-gray-700 rounded-lg p-3 border border-gray-600 smooth-transition hover:border-gray-500"      ,}
                    , _react2.default.createElement('div', { className: "text-xl font-bold text-yellow-400"  ,}, globalStats.tasksCompleted)
                    , _react2.default.createElement('div', { className: "text-xs text-gray-400" ,}, "Tasks Completed" )
                  )
                  , _react2.default.createElement('div', { className: "bg-gray-700 rounded-lg p-3 border border-gray-600 smooth-transition hover:border-gray-500"      ,}
                    , _react2.default.createElement('div', { className: "text-xl font-bold text-purple-400"  ,}, globalStats.memoryUsage)
                    , _react2.default.createElement('div', { className: "text-xs text-gray-400" ,}, "Memory Usage" )
                  )
                )
              )

              /* Monitor Agent Chat - Takes exact remaining height */
              , _react2.default.createElement('div', { className: "bg-gray-800 rounded-lg p-4 flex-1 flex flex-col border border-gray-700 overflow-hidden"        ,}
                , _react2.default.createElement('div', { className: "flex items-center justify-between mb-3 flex-shrink-0"    ,}
                  , _react2.default.createElement('h2', { className: "text-lg font-semibold flex items-center gap-2"    ,}
                    , _react2.default.createElement(_lucidereact.Bot, { className: "text-purple-400",} ), "Monitor Agent Chat"

                  )
                  , _react2.default.createElement('div', { className: "flex items-center gap-2"  ,}
                    , _react2.default.createElement('select', {
                      value: apiSelection,
                      onChange: (e) => setApiSelection(e.target.value),
                      className: "custom-input rounded px-2 py-1 text-sm smooth-transition"     ,}

                      , _react2.default.createElement('option', { value: "1",}, "Pollinations AI" )
                    )
                  )
                )

                /* Chat Messages - Takes exact remaining space minus input */
                , _react2.default.createElement('div', { className: "flex-1 bg-gray-700 rounded-lg p-3 mb-3 overflow-y-auto custom-scrollbar border border-gray-600"        ,}
                  , monitorChat.map(msg => (
                    _react2.default.createElement('div', { key: msg.id, className: `mb-3 ${msg.type === 'user' ? 'text-right' : 'text-left'}`,}
                      , _react2.default.createElement('div', { className: `inline-block p-3 rounded-lg max-w-2xl smooth-transition ${
                        msg.type === 'user'
                          ? 'bg-blue-600 text-white border border-blue-500'
                          : 'bg-gray-600 text-gray-100 border border-gray-500'
                      }`,}
                        , _react2.default.createElement('div', { className: "text-sm leading-relaxed" ,}, msg.message)
                        , msg.actions && msg.actions.length > 0 && (
                          _react2.default.createElement('div', { className: "mt-2 pt-2 border-t border-gray-500"   ,}
                            , _react2.default.createElement('div', { className: "text-xs text-gray-300 mb-1"  ,}, "Actions:")
                            , msg.actions.map((action, idx) => (
                              _react2.default.createElement('div', { key: idx, className: "text-xs bg-gray-700 rounded px-2 py-1 mb-1 border border-gray-600"       ,}
                                , _react2.default.createElement('span', { className: "font-mono text-blue-300" ,}, action.name)
                                , _react2.default.createElement('span', { className: "text-gray-400 ml-2" ,}
                                  , JSON.stringify(action.params)
                                )
                              )
                            ))
                          )
                        )
                        , _react2.default.createElement('div', { className: "text-xs opacity-70 mt-1"  ,}, msg.timestamp)
                      )
                    )
                  ))
                )

                /* Query Input - Fixed at bottom */
                , _react2.default.createElement('div', { className: "flex gap-2 flex-shrink-0"  ,}
                  , _react2.default.createElement('input', {
                    type: "text",
                    value: monitorQuery,
                    onChange: (e) => setMonitorQuery(e.target.value),
                    placeholder: "Ask the monitor agent..."   ,
                    className: "flex-1 custom-input rounded-lg px-3 py-2"    ,
                    onKeyPress: (e) => e.key === 'Enter' && sendMonitorQuery(),
                    disabled: isProcessingMonitor,}
                  )
                  , _react2.default.createElement('button', {
                    onClick: sendMonitorQuery,
                    disabled: isProcessingMonitor || !monitorQuery.trim(),
                    className: "bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white px-4 py-2 rounded-lg smooth-transition custom-button"        ,}

                    , isProcessingMonitor ? (
                      _react2.default.createElement('div', { className: "w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"      ,} )
                    ) : (
                      _react2.default.createElement(_lucidereact.Send, { className: "w-4 h-4" ,} )
                    )
                  )
                )
              )
            )

            /* Right Side - 1/4 width - Action Log */
            , _react2.default.createElement('div', { className: "bg-gray-800 rounded-lg p-4 flex flex-col border border-gray-700 h-full overflow-hidden"        ,}
              , _react2.default.createElement('div', { className: "flex items-center justify-between mb-3 flex-shrink-0"    ,}
                , _react2.default.createElement('h2', { className: "text-lg font-semibold flex items-center gap-2"    ,}
                  , _react2.default.createElement(_lucidereact.Terminal, { className: "text-orange-400",} ), "Action Log"

                )
                , _react2.default.createElement('button', {
                  onClick: () => setActionLog([]),
                  className: "p-1 text-gray-400 hover:text-red-400 smooth-transition custom-button rounded"     ,}

                  , _react2.default.createElement(_lucidereact.Trash2, { className: "w-4 h-4" ,} )
                )
              )

              , _react2.default.createElement('div', { className: "flex-1 overflow-y-auto custom-scrollbar"  ,}
                , actionLog.length > 0 ? (
                  _react2.default.createElement('div', { className: "space-y-2",}
                    , actionLog.map(action => (
                      _react2.default.createElement('div', { key: action.id, className: "bg-gray-700 rounded-lg p-3 border border-gray-600 smooth-transition hover:border-gray-500"      ,}
                        , _react2.default.createElement('div', { className: "flex items-center justify-between mb-2"   ,}
                          , _react2.default.createElement('span', { className: "font-mono text-xs text-blue-400"  ,}, action.name)
                          , getStatusIcon(action.status)
                        )
                        , _react2.default.createElement('div', { className: "text-xs text-gray-300 mb-1"  ,}, action.description)
                        , _react2.default.createElement('div', { className: "text-xs text-gray-400 space-y-1"  ,}
                          , _react2.default.createElement('div', null, "Duration: " , action.duration)
                          , _react2.default.createElement('div', null, "Time: " , action.timestamp)
                          , _react2.default.createElement('div', { className: "font-mono bg-gray-800 rounded p-1 mt-1 text-xs border border-gray-600"       ,}
                            , JSON.stringify(action.params)
                          )
                        )
                      )
                    ))
                  )
                ) : (
                  _react2.default.createElement('div', { className: "text-gray-400 text-center py-8 text-sm"   ,}
                    , apiConnected ? 'No action logs available.' : 'API disconnected - cannot fetch logs'
                  )
                )
              )
            )
          )
        ) : (
          // Agent Management Tab
          _react2.default.createElement('div', { className: "grid grid-cols-3 gap-4 h-full"   ,}
            /* Left Column - Agent List */
            , _react2.default.createElement('div', { className: "bg-gray-800 rounded-lg p-4 flex flex-col border border-gray-700 h-full overflow-hidden"        ,}
              , _react2.default.createElement('div', { className: "flex items-center justify-between mb-3 flex-shrink-0"    ,}
                , _react2.default.createElement('h2', { className: "text-lg font-semibold flex items-center gap-2"    ,}
                  , _react2.default.createElement(_lucidereact.Users, { className: "text-green-400",} ), "Agent List"

                )
                , _react2.default.createElement('span', { className: "text-sm text-gray-400" ,}, agents.length, " agents" )
              )

              , _react2.default.createElement('div', { className: "flex-1 overflow-y-auto custom-scrollbar"  ,}
                , agents.length > 0 ? (
                  _react2.default.createElement('div', { className: "space-y-3",}
                    , agents.map(agent => (
                      _react2.default.createElement('div', {
                        key: agent.id,
                        onClick: () => updateAndSetSelectedAgent(agent),
                        className: `p-3 rounded-lg cursor-pointer smooth-transition custom-button border ${
                          _optionalChain([selectedAgent, 'optionalAccess', _7 => _7.id]) === agent.id
                            ? 'bg-blue-600 border-blue-500 shadow-lg'
                            : 'bg-gray-700 hover:bg-gray-600 border-gray-600 hover:border-gray-500'
                        }`,}

                        , _react2.default.createElement('div', { className: "flex items-center justify-between mb-2"   ,}
                          , _react2.default.createElement('span', { className: "font-medium text-sm" ,}, agent.name)
                          , _react2.default.createElement('div', { className: `w-3 h-3 rounded-full smooth-transition ${
                            agent.status === 'online' ? 'bg-green-400' : 
                            agent.status === 'offline' ? 'bg-red-400' : 'bg-gray-400'
                          }`,} )
                        )

                        // Add control buttons
                        , _react2.default.createElement('div', { 
                          className: "flex gap-1 mb-2",
                          onClick: (e) => e.stopPropagation()
                        },
                          agent.status === 'online' ? (
                            _react2.default.createElement(_react2.default.Fragment, null,
                              _react2.default.createElement('button', {
                                onClick: () => stopAgent(agent.name),
                                className: "px-2 py-1 text-xs bg-red-600 hover:bg-red-700 rounded smooth-transition custom-button"
                              }, "Stop"),
                              _react2.default.createElement('button', {
                                onClick: () => restartAgent(agent.name),
                                className: "px-2 py-1 text-xs bg-yellow-600 hover:bg-yellow-700 rounded smooth-transition custom-button"
                              }, "Restart")
                            )
                          ) : (
                            _react2.default.createElement('button', {
                              onClick: () => startAgent(agent.name),
                              className: "px-2 py-1 text-xs bg-green-600 hover:bg-green-700 rounded smooth-transition custom-button"
                            }, "Start")
                          )
                        )

                        , _react2.default.createElement('div', { className: "text-xs text-gray-300 space-y-1"  ,}
                          , _react2.default.createElement('div', { className: "flex items-center gap-2"  ,}
                            , _react2.default.createElement(_lucidereact.Heart, { className: "w-3 h-3" ,} )
                            , _react2.default.createElement('span', { className: getHealthColor(agent.health, agent.maxHealth),}
                              , agent.health || '-', "/", agent.maxHealth || '-'
                            )
                          )
                          , _react2.default.createElement('div', { className: "flex items-center gap-2"  ,}
                            , getBiomeIcon(agent.biome)
                            , _react2.default.createElement('span', null, agent.biome || '-', " (" , _optionalChain([agent, 'access', _8 => _8.coordinates, 'optionalAccess', _9 => _9.x]) || '-', ", " , _optionalChain([agent, 'access', _10 => _10.coordinates, 'optionalAccess', _11 => _11.y]) || '-', ", " , _optionalChain([agent, 'access', _12 => _12.coordinates, 'optionalAccess', _13 => _13.z]) || '-', ")")
                          )
                          , _react2.default.createElement('div', { className: "flex items-center gap-2"  ,}
                            , _react2.default.createElement(_lucidereact.Pickaxe, { className: "w-3 h-3" ,} )
                            , _react2.default.createElement('span', null, agent.task || '-')
                          )
                        )
                      )
                    ))
                  )
                ) : (
                  _react2.default.createElement('div', { className: "text-gray-400 text-center py-8"  ,}
                    , apiConnected ? (
                      _react2.default.createElement('div', null
                        , _react2.default.createElement(_lucidereact.Users, { className: "w-16 h-16 mx-auto mb-4 opacity-30"    ,} )
                        , _react2.default.createElement('div', { className: "text-lg font-medium mb-2"  ,}, "No Agents Found"  )
                        , _react2.default.createElement('div', { className: "text-sm",}, "No AI agents are currently registered in the system."        )
                      )
                    ) : (
                      _react2.default.createElement('div', null
                        , _react2.default.createElement(_lucidereact.WifiOff, { className: "w-16 h-16 mx-auto mb-4 opacity-30"    ,} )
                        , _react2.default.createElement('div', { className: "text-lg font-medium mb-2"  ,}, "API Disconnected" )
                        , _react2.default.createElement('div', { className: "text-sm",}, "Cannot load agents. Please check the backend connection."       )
                      )
                    )
                  )
                )
              )
              , _react2.default.createElement('div', { className: "flex gap-2 mt-3 pt-3 border-t border-gray-600" },
                _react2.default.createElement('button', {
                  onClick: killAllAgents,
                  className: "flex-1 px-3 py-2 text-sm bg-red-600 hover:bg-red-700 rounded smooth-transition custom-button"
                }, "Stop All"),
                _react2.default.createElement('button', {
                  onClick: shutdown,
                  className: "flex-1 px-3 py-2 text-sm bg-gray-600 hover:bg-gray-700 rounded smooth-transition custom-button"
                }, "Shutdown")
              )
            )

            /* Middle Column - Agent Operations */
            , _react2.default.createElement('div', { className: "bg-gray-800 rounded-lg p-4 flex flex-col border border-gray-700 h-full overflow-hidden"        ,}
              , _react2.default.createElement('div', { className: "flex items-center justify-between mb-3 flex-shrink-0"    ,}
                , _react2.default.createElement('h2', { className: "text-lg font-semibold flex items-center gap-2"    ,}
                  , _react2.default.createElement(_lucidereact.Terminal, { className: "text-blue-400",} )
                  , selectedAgent ? `Operations for ${selectedAgent.name}` : 'Select an Agent'
                )
              )

              , selectedAgent ? (
                _react2.default.createElement(_react2.default.Fragment, null
                  /* Enhanced Agent Details */
                  , _react2.default.createElement('div', { className: "bg-gray-700 rounded-lg p-3 mb-3 flex-shrink-0 border border-gray-600"      ,}
                    , _react2.default.createElement('div', { className: "grid grid-cols-2 gap-3 text-sm"   ,}
                      , _react2.default.createElement('div', null, "Status: " , _react2.default.createElement('span', { className: 
                        selectedAgent.status === 'online' ? 'text-green-400' : 
                        selectedAgent.status === 'offline' ? 'text-red-400' : 'text-gray-400'
                      ,}, selectedAgent.status || '-'))
                      , _react2.default.createElement('div', null, "Health: " , _react2.default.createElement('span', { className: getHealthColor(selectedAgent.health, selectedAgent.maxHealth),}, selectedAgent.health || '-', "/", selectedAgent.maxHealth || '-'))
                      , _react2.default.createElement('div', null, "Hunger: " , _react2.default.createElement('span', { className: "text-orange-400",}, selectedAgent.hunger || '-', "/20"))
                      , _react2.default.createElement('div', null, "XP: " , _react2.default.createElement('span', { className: "text-yellow-400",}, selectedAgent.experience || '-'))
                      , _react2.default.createElement('div', null, "Mode: " , _react2.default.createElement('span', { className: "text-purple-400",}, selectedAgent.gameMode || '-'))
                      , _react2.default.createElement('div', null, "Dimension: " , _react2.default.createElement('span', { className: "text-cyan-400",}, selectedAgent.dimension || '-'))
                    )
                    , _react2.default.createElement('div', { className: "mt-2 pt-2 border-t border-gray-600"   ,}
                      , _react2.default.createElement('div', { className: "text-xs text-gray-400 mb-1"  ,}, "Coordinates:")
                      , _react2.default.createElement('div', { className: "text-xs font-mono text-blue-300"  ,}, "X: "
                         , _optionalChain([selectedAgent, 'access', _14 => _14.coordinates, 'optionalAccess', _15 => _15.x]) || '-', ", Y: "  , _optionalChain([selectedAgent, 'access', _16 => _16.coordinates, 'optionalAccess', _17 => _17.y]) || '-', ", Z: "  , _optionalChain([selectedAgent, 'access', _18 => _18.coordinates, 'optionalAccess', _19 => _19.z]) || '-'
                      )
                    )
                  )

                  /* Voice Status */
                  , _react2.default.createElement('div', { className: "bg-gray-700 rounded-lg p-3 mb-3 flex-shrink-0 border border-gray-600"      ,}
                    , _react2.default.createElement('div', { className: "text-sm text-gray-300 mb-1"  ,}, "Voice Status:" )
                    , _react2.default.createElement('div', { className: "text-sm text-blue-400" ,}, voiceStatus)
                  )

                  /* Voice Transcript History */
                  , _react2.default.createElement('div', { className: "bg-gray-700 rounded-lg p-3 mb-3 flex-shrink-0 border border-gray-600"      ,}
                    , _react2.default.createElement('div', { className: "flex items-center justify-between mb-2"   ,}
                      , _react2.default.createElement('h3', { className: "text-sm font-medium" ,}, "Voice Transcript" )
                      , _react2.default.createElement('button', {
                        onClick: () => setTranscriptHistory([]),
                        className: "p-1 text-gray-400 hover:text-red-400 smooth-transition custom-button rounded"     ,}

                        , _react2.default.createElement(_lucidereact.Trash2, { className: "w-3 h-3" ,} )
                      )
                    )

                    , _react2.default.createElement('div', { className: "h-20 overflow-y-auto custom-scrollbar"  ,}
                      , transcriptHistory.length > 0 ? (
                        _react2.default.createElement('div', { className: "space-y-1",}
                          , transcriptHistory.slice(0, 3).map(entry => (
                            _react2.default.createElement('div', { key: entry.id, className: "bg-gray-600 rounded p-2 border border-gray-500"    ,}
                              , _react2.default.createElement('div', { className: "text-xs text-gray-400" ,}, entry.timestamp)
                              , _react2.default.createElement('div', { className: "text-xs",}, entry.text)
                            )
                          ))
                        )
                      ) : (
                        _react2.default.createElement('div', { className: "text-gray-400 text-center py-2 text-xs"   ,}, "No transcripts yet"  )
                      )
                    )
                  )

                  /* Agent Messages (Commands Sent) - Takes remaining space */
                  , _react2.default.createElement('div', { className: "bg-gray-700 rounded-lg p-3 mb-3 flex-1 flex flex-col border border-gray-600 overflow-hidden"         ,}
                    , _react2.default.createElement('h3', { className: "text-sm font-medium mb-2 text-gray-300 flex-shrink-0"    ,}, "Messages Received by Agent"   )
                    , _react2.default.createElement('div', { className: "flex-1 overflow-y-auto custom-scrollbar"  ,}
                      , agentMessages.length > 0 ? (
                        _react2.default.createElement('div', { className: "space-y-2",}
                          , agentMessages.map(msg => (
                            _react2.default.createElement('div', { key: msg.id, className: "p-3 bg-gray-600 rounded border border-gray-500 smooth-transition hover:border-gray-400"      ,}
                              , _react2.default.createElement('div', { className: "text-sm",}, msg.message)
                              , _react2.default.createElement('div', { className: "flex justify-between items-center mt-2 text-xs"    ,}
                                , _react2.default.createElement('span', { className: "text-gray-400",}, msg.timestamp)
                                , _react2.default.createElement('span', { className: `font-medium ${getMessageStatusColor(msg.status)}`,}
                                  , msg.status
                                )
                              )
                            )
                          ))
                          , _react2.default.createElement('div', { ref: messagesEndRef })
                        )
                      ) : (
                        _react2.default.createElement('div', { className: "text-gray-400 text-center py-4 text-sm"   ,}
                          , apiConnected ? 'No messages sent to this agent yet.' : 'API disconnected - cannot load messages'
                        )
                      )
                    )
                  )

                  /* Command Input with Voice Button After Send */
                  , _react2.default.createElement('div', { className: "flex gap-2 flex-shrink-0"  ,}
                    , _react2.default.createElement('input', {
                      type: "text",
                      value: agentCommand,
                      onChange: (e) => setAgentCommand(e.target.value),
                      placeholder: apiConnected ? "Enter command for agent..." : "API unavailable - commands disabled",
                      className: "flex-1 custom-input rounded-lg px-3 py-2"    ,
                      onKeyPress: (e) => e.key === 'Enter' && handleSendAgentCommand(),
                      disabled: isProcessingAgent || !apiConnected,}
                    )
                    , _react2.default.createElement('button', {
                      onClick: handleSendAgentCommand,
                      disabled: isProcessingAgent || !agentCommand.trim() || !apiConnected,
                      className: "bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white px-4 py-2 rounded-lg smooth-transition custom-button"        ,}

                      , isProcessingAgent ? (
                        _react2.default.createElement('div', { className: "w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"      ,} )
                      ) : (
                        _react2.default.createElement(_lucidereact.Send, { className: "w-4 h-4" ,} )
                      )
                    )
                    , _react2.default.createElement('button', {
                      onClick: toggleVoiceRecording,
                      disabled: !apiConnected,
                      className: `p-2 rounded-lg smooth-transition custom-button ${
                        isListening
                          ? 'bg-red-600 hover:bg-red-700 pulse-animation'
                          : 'bg-purple-600 hover:bg-purple-700'
                      }`,}

                      , isListening ? _react2.default.createElement(_lucidereact.MicOff, { className: "w-4 h-4" ,} ) : _react2.default.createElement(_lucidereact.Mic, { className: "w-4 h-4" ,} )
                    )
                  )
                )
              ) : (
                _react2.default.createElement('div', { className: "flex items-center justify-center flex-1 text-gray-400"    ,}
                  , agents.length > 0 ? (
                    "Select an agent from the list to manage operations"
                  ) : (
                    "No agents available to manage"
                  )
                )
              )
            )

            /* Right Column - Agent Status Logs */
            , _react2.default.createElement('div', { className: "bg-gray-800 rounded-lg p-4 flex flex-col border border-gray-700 h-full overflow-hidden"        ,}
              , _react2.default.createElement('div', { className: "flex items-center justify-between mb-3 flex-shrink-0"    ,}
                , _react2.default.createElement('h2', { className: "text-lg font-semibold flex items-center gap-2"    ,}
                  , _react2.default.createElement(_lucidereact.Activity, { className: "text-cyan-400",} ), "Agent Status Logs"

                )
                , _react2.default.createElement('button', {
                  onClick: refreshAllData,
                  disabled: isRefreshingStatus,
                  className: "p-2 text-gray-400 hover:text-cyan-400 smooth-transition custom-button rounded"     ,}

                  , _react2.default.createElement(_lucidereact.RefreshCw, { className: `w-4 h-4 ${isRefreshingStatus ? 'animate-spin' : ''}`,} )
                )
              )

              , _react2.default.createElement('div', { className: "flex-1 overflow-y-auto custom-scrollbar"  ,}
                , agentStatusLogs.length > 0 ? (
                  _react2.default.createElement('div', { className: "space-y-2",}
                    , agentStatusLogs.map(log => (
                      _react2.default.createElement('div', { key: log.id, className: `rounded-lg p-3 border ${getLogTypeColor(log.type)} smooth-transition`,}
                        , _react2.default.createElement('div', { className: "flex items-center justify-between mb-2"   ,}
                          , _react2.default.createElement('div', { className: "flex items-center gap-2"  ,}
                            , getLogTypeIcon(log.type)
                            , _react2.default.createElement('span', { className: "font-medium text-xs" ,}, log.agent)
                          )
                          , _react2.default.createElement('span', { className: "text-xs opacity-70" ,}, log.timestamp)
                        )
                        , _react2.default.createElement('div', { className: "text-xs mb-2" ,}, log.message)
                        , _react2.default.createElement('div', { className: "text-xs font-mono bg-gray-800 rounded p-2 border border-gray-600"      ,}
                          , _react2.default.createElement('div', { className: "text-gray-400",}, "Event: " , log.event)
                          , log.data && (
                            _react2.default.createElement('div', { className: "text-gray-300 mt-1" ,}
                              , JSON.stringify(log.data, null, 2)
                            )
                          )
                        )
                      )
                    ))
                  )
                ) : (
                  _react2.default.createElement('div', { className: "text-gray-400 text-center py-8 text-sm"   ,}
                    , apiConnected ? 'No status logs available. Click refresh to fetch updates.' : 'API disconnected - cannot fetch logs'
                  )
                )
              )
            )
          )
        )
      )
    )
  );
};

exports. default = MinecraftAIManager;
</script></head>
  <body>
  

<div id="preview-app"></div></body></html>